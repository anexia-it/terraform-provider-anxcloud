---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "anxcloud_virtual_server Resource - terraform-provider-anxcloud"
subcategory: ""
description: |-
  The virtual_server resource allows you to configure and run virtual machines.
  Known limitations
  removal of disks not supportedremoval of networks not supported
---

# anxcloud_virtual_server (Resource)

The virtual_server resource allows you to configure and run virtual machines.

### Known limitations
- removal of disks not supported
- removal of networks not supported

## Example Usage

```terraform
data "anxcloud_core_location" "anx04" {
  code = "ANX04"
}

data "anxcloud_template" "anx04" {
  location_id   = data.anxcloud_core_location.anx04.id
  template_type = "templates"
}

locals {
  debian_11_templates = values({
    for i, template in data.anxcloud_template.anx04.templates : tostring(i) => template
    if substr(template.name, 0, 9) == "Debian 11"
  })
}

resource "anxcloud_vlan" "example" {
  count           = 2
  location_id     = data.anxcloud_core_location.anx04.id
  vm_provisioning = true
}

resource "anxcloud_virtual_server" "example" {
  hostname      = "example-terraform"
  location_id   = data.anxcloud_core_location.anx04.id
  template_id   = local.debian_11_templates[0].id
  template_type = "templates"

  cpus   = 4
  memory = 4096

  ssh_key = file("~/.ssh/id_rsa.pub")

  # set two network interfaces
  # NIC 1
  network {
    vlan_id  = anxcloud_vlan.example[0].id
    nic_type = "vmxnet3"
  }

  # NIC 2
  network {
    vlan_id  = anxcloud_vlan.example[1].id
    nic_type = "vmxnet3"
  }

  # Disk 1
  disk {
    disk_gb   = 100
    disk_type = "STD1"
  }

  # Disk 2
  disk {
    disk_gb   = 200
    disk_type = "STD1"
  }

  dns = ["8.8.8.8"]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `cpus` (Number) Amount of CPUs.
- `disk` (Block List, Min: 1) Virtual Server Disks (see [below for nested schema](#nestedblock--disk))
- `hostname` (String) Virtual server hostname.
- `location_id` (String) Location identifier.
- `memory` (Number) Memory in MB.
- `template_id` (String) Template identifier.
- `template_type` (String) OS template type.

### Optional

- `boot_delay` (Number) Boot delay in seconds. Example: (0, 1, …).
- `cpu_performance_type` (String) CPU type. Example: (`best-effort`, `standard`, `enterprise`, `performance`), defaults to `standard`.
- `critical_operation_confirmed` (Boolean) Confirms a critical operation (if needed). Potentially dangerous operations (e.g. resulting in data loss) require an additional confirmation. The parameter is used for VM UPDATE requests.
- `dns` (List of String) DNS configuration. Maximum items 4. Defaults to template settings.
- `enter_bios_setup` (Boolean) Start the VM into BIOS setup on next boot.
- `force_restart_if_needed` (Boolean) Certain operations may only be performed in powered off state. Such as: shrinking memory, shrinking/adding CPU, removing disk and scaling a disk beyond 2 GB. Passing this value as true will always execute a power off and reboot request after completing all other operations. Without this flag set to true scaling operations requiring a reboot will fail.
- `id` (String) The ID of this resource.
- `network` (Block List) Network interface (see [below for nested schema](#nestedblock--network))
- `password` (String, Sensitive) Plaintext password. Example: ('!anx123mySuperStrongPassword123anx!', 'go3ju0la1ro3', …). For systems that support it, we strongly recommend using a SSH key instead.
- `script` (String) Script to be executed after provisioning. Should be base64 encoded. Consider the corresponding shebang at the beginning of your script. If you want to use PowerShell, the first line should be: #ps1_sysnative.
- `sockets` (Number) Amount of CPU sockets Number of cores have to be a multiple of sockets, as they will be spread evenly across all sockets. Defaults to number of cores, i.e. one socket per CPU core.
- `ssh_key` (String) Public key (instead of password, only for Linux systems). Recommended over providing a plaintext password.
- `tags` (List of String) List of tags attached to the Virtual Server.
- `timeouts` (Block, Optional) (see [below for nested schema](#nestedblock--timeouts))

### Read-Only

- `info` (List of Object) Virtual server info (see [below for nested schema](#nestedatt--info))

<a id="nestedblock--disk"></a>
### Nested Schema for `disk`

Required:

- `disk_gb` (Number) Disk capacity in GB.

Optional:

- `disk_type` (String) Disk category (limits disk performance, e.g. IOPS). Default value depends on location.

Read-Only:

- `disk_exact` (Number) Exact floating point disk size. Not configurable; just for comparison.
- `disk_id` (Number) Device identifier of the disk.


<a id="nestedblock--network"></a>
### Nested Schema for `network`

Required:

- `nic_type` (String) Network interface card type.
- `vlan_id` (String) VLAN identifier.

Optional:

- `ips` (List of String) Requested list of IPs and IPs identifiers. IPs are ignored when using template_type 'from_scratch'. Defaults to free IPs from IP pool attached to VLAN.


<a id="nestedblock--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String)
- `delete` (String)
- `read` (String)
- `update` (String)


<a id="nestedatt--info"></a>
### Nested Schema for `info`

Read-Only:

- `cores` (Number)
- `cpu` (Number)
- `custom_name` (String)
- `disks_info` (List of Object) (see [below for nested schema](#nestedobjatt--info--disks_info))
- `disks_number` (Number)
- `guest_os` (String)
- `guest_tools_status` (String)
- `identifier` (String)
- `location_code` (String)
- `location_country` (String)
- `location_name` (String)
- `name` (String)
- `network` (List of Object) (see [below for nested schema](#nestedobjatt--info--network))
- `ram` (Number)
- `status` (String)
- `version_tools` (String)

<a id="nestedobjatt--info--disks_info"></a>
### Nested Schema for `info.disks_info`

Read-Only:

- `bus_type` (String)
- `bus_type_label` (String)
- `disk_gb` (Number)
- `disk_id` (Number)
- `disk_type` (String)
- `iops` (Number)
- `latency` (Number)
- `storage_type` (String)


<a id="nestedobjatt--info--network"></a>
### Nested Schema for `info.network`

Read-Only:

- `id` (Number)
- `ip_v4` (List of String)
- `ip_v6` (List of String)
- `mac_address` (String)
- `nic` (Number)
- `vlan` (String)


